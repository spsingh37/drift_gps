\hypertarget{classimu__filter_1_1ImuAngVelEKF}{}\doxysection{imu\+\_\+filter\+::Imu\+Ang\+Vel\+EKF Class Reference}
\label{classimu__filter_1_1ImuAngVelEKF}\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}


{\ttfamily \#include $<$imu\+\_\+ang\+\_\+vel\+\_\+ekf.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a3f18329fd5e18bf387a8a3ee813146c7}{Log\+Input\+IMU}} ()
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a5782809f74d905f858d83bfef8a91a99}{Initialize\+Filter}} ()
\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Constructors}\par
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a6a92819de95fcea50088c9d0afa8df1b}{Imu\+Ang\+Vel\+EKF}} (\mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}} imu\+\_\+data\+\_\+buffer\+\_\+ptr, std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr, \mbox{\hyperlink{type__def_8h_ab7278aa41a61ce9bf0df7c732688cd11}{Angular\+Velocity\+Queue\+Ptr}} ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+ptr, std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr, const std\+::string \&yaml\+\_\+filepath)
\begin{DoxyCompactList}\small\item\em Constructor for the propagation class. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a940e4d731bc677bfd9c5d42382f25324}{Imu\+Ang\+Vel\+EKF}} (const std\+::string \&yaml\+\_\+filepath)
\begin{DoxyCompactList}\small\item\em Constructor for the propagation class. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Destructor}\par
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a4960406bff1b0b057ce9725a6a2d3ca7}{$\sim$\+Imu\+Ang\+Vel\+EKF}} ()
\begin{DoxyCompactList}\small\item\em Destructor for the imu filter class. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Filter thread}\par
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a53c082dc483c109571d27509ac484098}{Start\+Imu\+Filter\+Thread}} ()
\begin{DoxyCompactList}\small\item\em Start IMU fitler thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a5633cedac0490abc28c4b798bb6e0028}{Run\+Filter}} ()
\begin{DoxyCompactList}\small\item\em Run IMU filter. It runs in a new thread with a while loop. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a567bbc32244c0bfc600eb4355fae2e04}{Run\+Once}} ()
\begin{DoxyCompactList}\small\item\em Run the IMU angular velocity EKF filter for one step. This function will also push the latest filtered IMU data to the filtered\+\_\+imu\+\_\+data\+\_\+buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Getters}\par
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}} \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a79e3be4535df46bb71e0f6659e96aebc}{get\+\_\+filtered\+\_\+imu\+\_\+data\+\_\+buffer\+\_\+ptr}} ()
\begin{DoxyCompactList}\small\item\em Get the filtered imu data buffer. \end{DoxyCompactList}\item 
std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_acf4bfbe0ee887b114766f035f1054c97}{get\+\_\+filtered\+\_\+imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr}} ()
\begin{DoxyCompactList}\small\item\em Get the filtered\+\_\+imu data buffer mutex pointer. \end{DoxyCompactList}\item 
std\+::pair$<$ \mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}}, std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ $>$ \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_ac11d89480710e832c3d0b6253ece889c}{get\+\_\+filtered\+\_\+imu\+\_\+data\+\_\+buffer\+\_\+and\+\_\+mutex\+\_\+ptr}} ()
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Initialze IMU bias}\par
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_af6f6de929de5053df28e9137a5b6a079}{Init\+Imu\+Bias}} ()
\begin{DoxyCompactList}\small\item\em Initialize IMU bias using the static assumption. This assumes the robot is static at a horizontal surface. (i.\+e. The gravity = /f\$9.80 m/s$^\wedge$2/f\$ is pointing downward.) \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Setters}\par
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a0ff59482493a212f23884ac24b344b62}{clear}} ()
\begin{DoxyCompactList}\small\item\em Clear data buffers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Adders}\par
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a04c507acb417493175fee567241c904b}{add\+\_\+gyro\+\_\+propagate}} (\mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}} imu\+\_\+data\+\_\+buffer\+\_\+ptr, std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em Change filter setting to use gyro data from imu meausrement to perform EKF propagation. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_ab244959f2803c8114e5636090e1db05e}{add\+\_\+imu\+\_\+correction}} (\mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}} imu\+\_\+data\+\_\+buffer\+\_\+ptr, std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em add an imu correction \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a164cd0d4935cd44e1285276a74d8c1c8}{add\+\_\+ang\+\_\+vel\+\_\+correction}} (\mbox{\hyperlink{type__def_8h_ab7278aa41a61ce9bf0df7c732688cd11}{Angular\+Velocity\+Queue\+Ptr}} ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+ptr, std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em add an angular velocity correction \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Macro Correction Methods}\par
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a42867954ccf4f15a851c8d838739a347}{Single\+Imu\+Correction}} ()
\begin{DoxyCompactList}\small\item\em Perform correction with one imu measurement. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a13cad7e6eb58d469b9f0784e9f9055d7}{Multi\+Imu\+Correction}} ()
\begin{DoxyCompactList}\small\item\em Perform correction with two or more imu measurements. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a667a0f6ab36fdfcf5d606e0627cfc0d9}{Single\+Imu\+Ang\+Vel\+Correction}} ()
\begin{DoxyCompactList}\small\item\em Perform correction with one imu measurement and one angular velocity measurement. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a26ec7581fff4f348e8725e1c4d066e3d}{Ang\+Vel\+Correction}} ()
\begin{DoxyCompactList}\small\item\em Perform correction with one angular velocity. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Propagation methods}\par
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a926e85b83ac479970fd4a36755ff8770}{Gyro\+Propagate}} ()
\begin{DoxyCompactList}\small\item\em Perform propagation with imu / gyro measurement. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classimu__filter_1_1ImuAngVelEKF_a1ae11e1150f440aac417932fa99488bc}{Random\+Walk\+Propagate}} ()
\begin{DoxyCompactList}\small\item\em Perform propagation with random walk method. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a6a92819de95fcea50088c9d0afa8df1b}\label{classimu__filter_1_1ImuAngVelEKF_a6a92819de95fcea50088c9d0afa8df1b}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!ImuAngVelEKF@{ImuAngVelEKF}}
\index{ImuAngVelEKF@{ImuAngVelEKF}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{ImuAngVelEKF()}{ImuAngVelEKF()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Imu\+Ang\+Vel\+EKF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}}}]{imu\+\_\+data\+\_\+buffer\+\_\+ptr,  }\item[{std\+::shared\+\_\+ptr$<$ std\+::mutex $>$}]{imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr,  }\item[{\mbox{\hyperlink{type__def_8h_ab7278aa41a61ce9bf0df7c732688cd11}{Angular\+Velocity\+Queue\+Ptr}}}]{ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+ptr,  }\item[{std\+::shared\+\_\+ptr$<$ std\+::mutex $>$}]{ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr,  }\item[{const std\+::string \&}]{yaml\+\_\+filepath }\end{DoxyParamCaption})}



Constructor for the propagation class. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em imu\+\_\+data\+\_\+buffer\+\_\+ptr} & Pointer to the buffer of IMU sensor data. \\
\hline
\mbox{\texttt{ in}}  & {\em imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr} & Pointer to the mutex for the. IMU sensor data buffer. \\
\hline
\mbox{\texttt{ in}}  & {\em ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+ptr} & Pointer to the buffer of angular velocity sensor data. \\
\hline
\mbox{\texttt{ in}}  & {\em ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr} & Pointer to the mutex for the angular velocity sensor data buffer. \\
\hline
\mbox{\texttt{ in}}  & {\em yaml\+\_\+filepath} & Path to the yaml file for the propagation \\
\hline
\end{DoxyParams}
TODO\+: Add a switch for 1D or 3D filter\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a940e4d731bc677bfd9c5d42382f25324}\label{classimu__filter_1_1ImuAngVelEKF_a940e4d731bc677bfd9c5d42382f25324}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!ImuAngVelEKF@{ImuAngVelEKF}}
\index{ImuAngVelEKF@{ImuAngVelEKF}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{ImuAngVelEKF()}{ImuAngVelEKF()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Imu\+Ang\+Vel\+EKF (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{yaml\+\_\+filepath }\end{DoxyParamCaption})}



Constructor for the propagation class. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em yaml\+\_\+filepath} & Path to the yaml file for the propagation \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a4960406bff1b0b057ce9725a6a2d3ca7}\label{classimu__filter_1_1ImuAngVelEKF_a4960406bff1b0b057ce9725a6a2d3ca7}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!````~ImuAngVelEKF@{$\sim$ImuAngVelEKF}}
\index{````~ImuAngVelEKF@{$\sim$ImuAngVelEKF}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{$\sim$ImuAngVelEKF()}{~ImuAngVelEKF()}}
{\footnotesize\ttfamily imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::$\sim$\+Imu\+Ang\+Vel\+EKF (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Destructor for the imu filter class. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a164cd0d4935cd44e1285276a74d8c1c8}\label{classimu__filter_1_1ImuAngVelEKF_a164cd0d4935cd44e1285276a74d8c1c8}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!add\_ang\_vel\_correction@{add\_ang\_vel\_correction}}
\index{add\_ang\_vel\_correction@{add\_ang\_vel\_correction}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{add\_ang\_vel\_correction()}{add\_ang\_vel\_correction()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::add\+\_\+ang\+\_\+vel\+\_\+correction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{type__def_8h_ab7278aa41a61ce9bf0df7c732688cd11}{Angular\+Velocity\+Queue\+Ptr}}}]{ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+ptr,  }\item[{std\+::shared\+\_\+ptr$<$ std\+::mutex $>$}]{ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr }\end{DoxyParamCaption})}



add an angular velocity correction 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+ptr} & Pointer to the buffer of angular velocity sensor data. \\
\hline
\mbox{\texttt{ in}}  & {\em ang\+\_\+vel\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr} & Pointer to the mutex for the angular velocity sensor data buffer. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a04c507acb417493175fee567241c904b}\label{classimu__filter_1_1ImuAngVelEKF_a04c507acb417493175fee567241c904b}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!add\_gyro\_propagate@{add\_gyro\_propagate}}
\index{add\_gyro\_propagate@{add\_gyro\_propagate}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{add\_gyro\_propagate()}{add\_gyro\_propagate()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::add\+\_\+gyro\+\_\+propagate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}}}]{imu\+\_\+data\+\_\+buffer\+\_\+ptr,  }\item[{std\+::shared\+\_\+ptr$<$ std\+::mutex $>$}]{imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr }\end{DoxyParamCaption})}



Change filter setting to use gyro data from imu meausrement to perform EKF propagation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em imu\+\_\+data\+\_\+buffer\+\_\+ptr} & Pointer to the source of gyro / imu measurement \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_ab244959f2803c8114e5636090e1db05e}\label{classimu__filter_1_1ImuAngVelEKF_ab244959f2803c8114e5636090e1db05e}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!add\_imu\_correction@{add\_imu\_correction}}
\index{add\_imu\_correction@{add\_imu\_correction}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{add\_imu\_correction()}{add\_imu\_correction()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::add\+\_\+imu\+\_\+correction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}}}]{imu\+\_\+data\+\_\+buffer\+\_\+ptr,  }\item[{std\+::shared\+\_\+ptr$<$ std\+::mutex $>$}]{imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr }\end{DoxyParamCaption})}



add an imu correction 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em imu\+\_\+data\+\_\+buffer\+\_\+ptr} & Pointer to the buffer of IMU sensor data. \\
\hline
\mbox{\texttt{ in}}  & {\em imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr} & Pointer to the mutex for the. IMU sensor data buffer. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a26ec7581fff4f348e8725e1c4d066e3d}\label{classimu__filter_1_1ImuAngVelEKF_a26ec7581fff4f348e8725e1c4d066e3d}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!AngVelCorrection@{AngVelCorrection}}
\index{AngVelCorrection@{AngVelCorrection}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{AngVelCorrection()}{AngVelCorrection()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Ang\+Vel\+Correction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform correction with one angular velocity. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a0ff59482493a212f23884ac24b344b62}\label{classimu__filter_1_1ImuAngVelEKF_a0ff59482493a212f23884ac24b344b62}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!clear@{clear}}
\index{clear@{clear}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clear data buffers. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_ac11d89480710e832c3d0b6253ece889c}\label{classimu__filter_1_1ImuAngVelEKF_ac11d89480710e832c3d0b6253ece889c}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!get\_filtered\_imu\_data\_buffer\_and\_mutex\_ptr@{get\_filtered\_imu\_data\_buffer\_and\_mutex\_ptr}}
\index{get\_filtered\_imu\_data\_buffer\_and\_mutex\_ptr@{get\_filtered\_imu\_data\_buffer\_and\_mutex\_ptr}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{get\_filtered\_imu\_data\_buffer\_and\_mutex\_ptr()}{get\_filtered\_imu\_data\_buffer\_and\_mutex\_ptr()}}
{\footnotesize\ttfamily std\+::pair$<$ \mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}}, std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ $>$ imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::get\+\_\+filtered\+\_\+imu\+\_\+data\+\_\+buffer\+\_\+and\+\_\+mutex\+\_\+ptr (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_acf4bfbe0ee887b114766f035f1054c97}\label{classimu__filter_1_1ImuAngVelEKF_acf4bfbe0ee887b114766f035f1054c97}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!get\_filtered\_imu\_data\_buffer\_mutex\_ptr@{get\_filtered\_imu\_data\_buffer\_mutex\_ptr}}
\index{get\_filtered\_imu\_data\_buffer\_mutex\_ptr@{get\_filtered\_imu\_data\_buffer\_mutex\_ptr}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{get\_filtered\_imu\_data\_buffer\_mutex\_ptr()}{get\_filtered\_imu\_data\_buffer\_mutex\_ptr()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ std\+::mutex $>$ imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::get\+\_\+filtered\+\_\+imu\+\_\+data\+\_\+buffer\+\_\+mutex\+\_\+ptr (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get the filtered\+\_\+imu data buffer mutex pointer. 

\begin{DoxyReturn}{Returns}
std\+::shared\+\_\+ptr$<$std\+::mutex$>$\+: Pointer to the filtered\+\_\+imu data buffer mutex pointer 
\end{DoxyReturn}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a79e3be4535df46bb71e0f6659e96aebc}\label{classimu__filter_1_1ImuAngVelEKF_a79e3be4535df46bb71e0f6659e96aebc}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!get\_filtered\_imu\_data\_buffer\_ptr@{get\_filtered\_imu\_data\_buffer\_ptr}}
\index{get\_filtered\_imu\_data\_buffer\_ptr@{get\_filtered\_imu\_data\_buffer\_ptr}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{get\_filtered\_imu\_data\_buffer\_ptr()}{get\_filtered\_imu\_data\_buffer\_ptr()}}
{\footnotesize\ttfamily \mbox{\hyperlink{type__def_8h_ac57b15fb1e344a7041a287e5d13e1b00}{IMUQueue\+Ptr}} imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::get\+\_\+filtered\+\_\+imu\+\_\+data\+\_\+buffer\+\_\+ptr (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get the filtered imu data buffer. 

\begin{DoxyReturn}{Returns}
Robot\+State\+Queue\+Ptr\+: Pointer to the filtered imu data buffer 
\end{DoxyReturn}
\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a926e85b83ac479970fd4a36755ff8770}\label{classimu__filter_1_1ImuAngVelEKF_a926e85b83ac479970fd4a36755ff8770}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!GyroPropagate@{GyroPropagate}}
\index{GyroPropagate@{GyroPropagate}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{GyroPropagate()}{GyroPropagate()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Gyro\+Propagate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform propagation with imu / gyro measurement. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a5782809f74d905f858d83bfef8a91a99}\label{classimu__filter_1_1ImuAngVelEKF_a5782809f74d905f858d83bfef8a91a99}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!InitializeFilter@{InitializeFilter}}
\index{InitializeFilter@{InitializeFilter}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{InitializeFilter()}{InitializeFilter()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Initialize\+Filter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

TODO\+: Currently only support single imu correction\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_af6f6de929de5053df28e9137a5b6a079}\label{classimu__filter_1_1ImuAngVelEKF_af6f6de929de5053df28e9137a5b6a079}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!InitImuBias@{InitImuBias}}
\index{InitImuBias@{InitImuBias}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{InitImuBias()}{InitImuBias()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Init\+Imu\+Bias (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize IMU bias using the static assumption. This assumes the robot is static at a horizontal surface. (i.\+e. The gravity = /f\$9.80 m/s$^\wedge$2/f\$ is pointing downward.) 

The function takes the first n data points, average their value, and subtract the gravity to get the initial bias. \mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a3f18329fd5e18bf387a8a3ee813146c7}\label{classimu__filter_1_1ImuAngVelEKF_a3f18329fd5e18bf387a8a3ee813146c7}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!LogInputIMU@{LogInputIMU}}
\index{LogInputIMU@{LogInputIMU}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{LogInputIMU()}{LogInputIMU()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Log\+Input\+IMU (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a13cad7e6eb58d469b9f0784e9f9055d7}\label{classimu__filter_1_1ImuAngVelEKF_a13cad7e6eb58d469b9f0784e9f9055d7}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!MultiImuCorrection@{MultiImuCorrection}}
\index{MultiImuCorrection@{MultiImuCorrection}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{MultiImuCorrection()}{MultiImuCorrection()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Multi\+Imu\+Correction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform correction with two or more imu measurements. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a1ae11e1150f440aac417932fa99488bc}\label{classimu__filter_1_1ImuAngVelEKF_a1ae11e1150f440aac417932fa99488bc}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!RandomWalkPropagate@{RandomWalkPropagate}}
\index{RandomWalkPropagate@{RandomWalkPropagate}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{RandomWalkPropagate()}{RandomWalkPropagate()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Random\+Walk\+Propagate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform propagation with random walk method. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a5633cedac0490abc28c4b798bb6e0028}\label{classimu__filter_1_1ImuAngVelEKF_a5633cedac0490abc28c4b798bb6e0028}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!RunFilter@{RunFilter}}
\index{RunFilter@{RunFilter}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{RunFilter()}{RunFilter()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Run\+Filter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Run IMU filter. It runs in a new thread with a while loop. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a567bbc32244c0bfc600eb4355fae2e04}\label{classimu__filter_1_1ImuAngVelEKF_a567bbc32244c0bfc600eb4355fae2e04}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!RunOnce@{RunOnce}}
\index{RunOnce@{RunOnce}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{RunOnce()}{RunOnce()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Run\+Once (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Run the IMU angular velocity EKF filter for one step. This function will also push the latest filtered IMU data to the filtered\+\_\+imu\+\_\+data\+\_\+buffer. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a667a0f6ab36fdfcf5d606e0627cfc0d9}\label{classimu__filter_1_1ImuAngVelEKF_a667a0f6ab36fdfcf5d606e0627cfc0d9}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!SingleImuAngVelCorrection@{SingleImuAngVelCorrection}}
\index{SingleImuAngVelCorrection@{SingleImuAngVelCorrection}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{SingleImuAngVelCorrection()}{SingleImuAngVelCorrection()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Single\+Imu\+Ang\+Vel\+Correction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform correction with one imu measurement and one angular velocity measurement. 

\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a42867954ccf4f15a851c8d838739a347}\label{classimu__filter_1_1ImuAngVelEKF_a42867954ccf4f15a851c8d838739a347}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!SingleImuCorrection@{SingleImuCorrection}}
\index{SingleImuCorrection@{SingleImuCorrection}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{SingleImuCorrection()}{SingleImuCorrection()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Single\+Imu\+Correction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform correction with one imu measurement. 

TODO\+: double check if we need absolute here?\mbox{\Hypertarget{classimu__filter_1_1ImuAngVelEKF_a53c082dc483c109571d27509ac484098}\label{classimu__filter_1_1ImuAngVelEKF_a53c082dc483c109571d27509ac484098}} 
\index{imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}!StartImuFilterThread@{StartImuFilterThread}}
\index{StartImuFilterThread@{StartImuFilterThread}!imu\_filter::ImuAngVelEKF@{imu\_filter::ImuAngVelEKF}}
\doxysubsubsection{\texorpdfstring{StartImuFilterThread()}{StartImuFilterThread()}}
{\footnotesize\ttfamily void imu\+\_\+filter\+::\+Imu\+Ang\+Vel\+EKF\+::\+Start\+Imu\+Filter\+Thread (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Start IMU fitler thread. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/neofelis/\+VRX/drift/include/drift/imu\+\_\+filter/\mbox{\hyperlink{imu__ang__vel__ekf_8h}{imu\+\_\+ang\+\_\+vel\+\_\+ekf.\+h}}\item 
/home/neofelis/\+VRX/drift/src/imu\+\_\+filter/\mbox{\hyperlink{imu__ang__vel__ekf_8cpp}{imu\+\_\+ang\+\_\+vel\+\_\+ekf.\+cpp}}\end{DoxyCompactItemize}
